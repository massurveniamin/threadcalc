<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Thread Calculator | Leather Lab</title>
    <style>
        :root { --p: #2563eb; --bg: #f8fafc; --b: #e2e8f0; --t: #0f172a; --ts: #64748b; }
        body { background: var(--bg); color: var(--t); font-family: system-ui, -apple-system, sans-serif; margin: 0; display: flex; justify-content: center; padding: 20px; }
        .app { width: 100%; max-width: 900px; display: grid; grid-template-columns: 1fr 320px; gap: 24px; }
        .card { background: #fff; border: 1px solid var(--b); border-radius: 20px; padding: 24px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); box-sizing: border-box; }
        .header { grid-column: 1 / -1; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .header h1 { font-size: 24px; font-weight: 800; margin: 0; letter-spacing: -0.02em; }
        select { padding: 8px 12px; border-radius: 10px; border: 1px solid var(--b); background: #fff; font-weight: 600; cursor: pointer; }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .field { display: flex; flex-direction: column; }
        label { font-size: 11px; font-weight: 700; text-transform: uppercase; color: var(--ts); margin-bottom: 8px; }
        
        /* Тусклый цвет текста во всех полях ввода */
        input, textarea { 
            padding: 14px; 
            border: 1.5px solid var(--b); 
            border-radius: 12px; 
            font-size: 16px; 
            width: 100%; 
            box-sizing: border-box; 
            background: #fdfdfd; 
            transition: 0.2s; 
            color: #64748b; 
            font-weight: 500;
        }
        
        input:focus, textarea:focus { 
            outline: none; 
            border-color: var(--p); 
            background: #fff; 
            color: #475569;
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.05); 
        }
        
        textarea::placeholder, input::placeholder {
            color: #cbd5e1; 
            opacity: 1;
            font-weight: 400;
        }

        .result-section { margin-top: 32px; border-top: 1px solid var(--b); padding-top: 24px; }
        .res-title { font-size: 13px; font-weight: 800; color: var(--ts); text-align: center; margin-bottom: 16px; text-transform: uppercase; letter-spacing: 0.05em; }
        .results { background: #f1f5f9; border-radius: 16px; padding: 24px; display: grid; grid-template-columns: repeat(3, 1fr); text-align: center; }
        .res-v { display: block; font-size: 24px; font-weight: 800; color: var(--p); }
        .res-l { font-size: 11px; font-weight: 600; color: var(--ts); }
        
        .conv-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 30px; border-top: 1px dashed var(--b); padding-top: 24px; }
        .conv-card { padding: 16px; border: 1px solid var(--b); border-radius: 14px; background: #fdfdfd; }
        .conv-val { margin-top: 10px; font-weight: 800; color: var(--p); font-size: 15px; }

        .btn { width: 100%; background: var(--t); color: #fff; border: none; padding: 15px; border-radius: 12px; font-weight: 700; cursor: pointer; margin-top: 16px; transition: 0.2s; }
        @media (max-width: 850px) { .app { grid-template-columns: 1fr; } .grid, .conv-row { grid-template-columns: 1fr; } }
        .rtl { direction: rtl; text-align: right; }
    </style>
</head>
<body>

<div class="app" id="main-app">
    <header class="header">
        <h1 id="ui-title">Thread Calculator</h1>
        <select id="sel-lang" onchange="applyLang(true)">
            <option value="en">English</option>
            <option value="ua">Українська</option>
            <option value="zh">简体中文</option>
            <option value="ja">日本語</option>
            <option value="es">Español</option>
            <option value="de">Deutsch</option>
            <option value="fr">Français</option>
            <option value="ar">العربية</option>
        </select>
    </header>

    <main class="card">
        <div class="grid">
            <div class="field"><label id="l-len">Stitching perimeter (mm)*</label><input type="number" id="v-len" oninput="runCalculation()" placeholder="0"></div>
            <div class="field"><label id="l-thick">Product thickness (mm)*</label><input type="number" id="v-thick" oninput="runCalculation()" placeholder="0"></div>
            <div class="field"><label id="l-step">Stitch length (mm)*</label><input type="number" id="v-step" oninput="runCalculation()" placeholder="0"></div>
            <div class="field"><label id="l-needle">Needle length (mm)*</label><input type="number" id="v-needle" oninput="runCalculation()" placeholder="0"></div>
        </div>

        <div class="result-section">
            <div class="res-title" id="res-header">Estimated thread amount</div>
            <div class="results">
                <div><span class="res-l">MM</span><span class="res-v" id="r-mm">0</span></div>
                <div><span class="res-l">CM</span><span class="res-v" id="r-cm">0</span></div>
                <div><span class="res-l">INCH</span><span class="res-v" id="r-in">0</span></div>
            </div>
        </div>

        <div class="conv-row">
            <div class="conv-card"><label>INCH ⮕ MM</label><input type="number" id="c-in" oninput="runCalculation()" placeholder="0"><div id="out-in-mm" class="conv-val">25.40 mm</div></div>
            <div class="conv-card"><label>SPI ⮕ MM</label><input type="number" id="c-spi" oninput="runCalculation()" placeholder="0"><div id="out-spi" class="conv-val">3.63 mm</div></div>
            <div class="conv-card"><label>OZ ⮕ MM</label><input type="number" id="c-oz" oninput="runCalculation()" placeholder="0"><div id="out-oz" class="conv-val">1.60 mm</div></div>
        </div>
    </main>

    <aside class="card" style="height: fit-content;">
        <label id="l-notes">Project Notes</label>
        <textarea id="v-notes" style="height:140px; margin-top:10px; resize:none;"></textarea>
        <button class="btn" id="btn-copy" onclick="copyData()">Copy Report</button>
    </aside>
</div>

<script>
    const dictionary = {
        en: { title: "Thread Calculator", len: "Stitching perimeter (mm)*", thick: "Product thickness (mm)*", step: "Stitch length (mm)*", needle: "Needle length (mm)*", notes: "Project Notes", placeholder: "For example, the name of the product", copy: "Copy Report", res_header: "Estimated thread amount" },
        ua: { title: "Калькулятор нитки", len: "Периметр виробу, що прошивається (мм)*", thick: "Товщина виробу (мм)*", step: "Довжина стібка (мм)*", needle: "Довжина голки (мм)*", notes: "Нотатки", placeholder: "Наприклад, назва виробу", copy: "Копіювати звіт", res_header: "Необхідна кількість нитки" },
        zh: { title: "用线量计算器", len: "缝合周长 (mm)*", thick: "产品厚度 (mm)*", step: "针距长度 (mm)*", needle: "缝针长度 (mm)*", notes: "项目备注", placeholder: "例如，产品名称", copy: "复制报告", res_header: "预计用线量" },
        ja: { title: "糸計算機", len: "縫い目の周囲 (mm)*", thick: "製品の厚さ (mm)*", step: "針目の長さ (mm)*", needle: "針の長さ (mm)*", notes: "プロジェクトメモ", placeholder: "例：製品名", copy: "レポートをコピー", res_header: "必要な糸の推定数" },
        es: { title: "Calculadora de hilo", len: "Perímetro de costura (mm)*", thick: "Grosor del producto (mm)*", step: "Largo de puntada (mm)*", needle: "Largo de aguja (mm)*", notes: "Notas", placeholder: "Por ejemplo, el nombre del producto", copy: "Copiar reporte", res_header: "Cantidad estimada de hilo" },
        de: { title: "Fadenrechner", len: "Nahtumfang (mm)*", thick: "Produktdicke (mm)*", step: "Stichlänge (mm)*", needle: "Nadellänge (mm)*", notes: "Notizen", placeholder: "Zum Beispiel der Name des Produkts", copy: "Kopieren", res_header: "Geschätzte Fadenmenge" },
        fr: { title: "Calculateur de fil", len: "Périmètre de couture (mm)*", thick: "Épaisseur du produit (mm)*", step: "Longueur du point (mm)*", needle: "Longueur de l'aiguille (mm)*", notes: "Notes", placeholder: "Par exemple, le nom du produit", copy: "Copier le rapport", res_header: "Quantité de fil estimée" },
        ar: { title: "حاسبة الخيط", len: "محيط الخياطة (مم)*", thick: "سمك المنتج (مم)*", step: "طول الغرزة (مم)*", needle: "طول الإبرة (مم)*", notes: "ملاحظات", placeholder: "على سبيل المثال، اسم المنتج", copy: "نسخ التقرير", res_header: "كمية الخيط المطلوبة" }
    };

    function applyLang(save = false) {
        const l = document.getElementById('sel-lang').value;
        const d = dictionary[l];
        if (save) localStorage.setItem('userLang', l);

        document.getElementById('ui-title').innerText = d.title;
        document.getElementById('l-len').innerText = d.len;
        document.getElementById('l-thick').innerText = d.thick;
        document.getElementById('l-step').innerText = d.step;
        document.getElementById('l-needle').innerText = d.needle;
        document.getElementById('l-notes').innerText = d.notes;
        document.getElementById('v-notes').placeholder = d.placeholder;
        document.getElementById('btn-copy').innerText = d.copy;
        document.getElementById('res-header').innerText = d.res_header;
        document.getElementById('main-app').classList.toggle('rtl', l === 'ar');
    }

    function runCalculation() {
        const L = parseFloat(document.getElementById('v-len').value) || 0;
        const T = parseFloat(document.getElementById('v-thick').value) || 0;
        const S = parseFloat(document.getElementById('v-step').value) || 0;
        const N = parseFloat(document.getElementById('v-needle').value) || 0;

        if (L > 0 && T > 0 && S > 0 && N > 0) {
            let mm = (L / S * (S + 2 * T)) + (N * 4);
            document.getElementById('r-mm').innerText = Math.round(mm);
            document.getElementById('r-cm').innerText = (mm / 10).toFixed(1);
            document.getElementById('r-in').innerText = (mm / 25.4).toFixed(2);
        } else {
            document.getElementById('r-mm').innerText = "0";
            document.getElementById('r-cm').innerText = "0";
            document.getElementById('r-in').innerText = "0";
        }

        const inchVal = parseFloat(document.getElementById('c-in').value) || 0;
        document.getElementById('out-in-mm').innerText = (inchVal * 25.4).toFixed(2) + " mm";
        const spiVal = parseFloat(document.getElementById('c-spi').value) || 0;
        document.getElementById('out-spi').innerText = spiVal > 0 ? (25.4 / spiVal).toFixed(2) + " mm" : "0.00 mm";
        const ozVal = parseFloat(document.getElementById('c-oz').value) || 0;
        document.getElementById('out-oz').innerText = ozVal > 0 ? (ozVal * 0.4).toFixed(2) + " mm" : "0.00 mm";
    }

    function copyData() {
        const n = document.getElementById('v-notes').value || "Project";
        const m = document.getElementById('r-mm').innerText;
        const c = document.getElementById('r-cm').innerText;
        const i = document.getElementById('r-in').innerText;
        const report = `${n}\nThread:\n- ${m} mm\n- ${c} cm\n- ${i} inch`;
        navigator.clipboard.writeText(report);
        const b = document.getElementById('btn-copy');
        b.innerText = "✓ OK";
        setTimeout(() => applyLang(false), 1500);
    }

    window.onload = () => {
        const savedLang = localStorage.getItem('userLang') || 'en';
        document.getElementById('sel-lang').value = savedLang;
        applyLang(false);
        runCalculation();
    };
</script>
</body>
</html>
